# 要件定義書（Mirror Adventurers）

## 1. プロジェクト概要
- **プロジェクト名**: Adventurers in the Mirror Webポータル
- **目的**: 架空世界の冒険者キャラクターを魅力的に紹介し、来訪者と制作チームを結び付ける。
- **主要成果物**:
  - 情緒的なランディングページ
  - キャラクター一覧ポータル
  - 個別キャラクター詳細／特設ストーリーページ
  - Sanity CMS を利用した運用基盤

## 2. ステークホルダー
| 区分 | 役割 / 関心 |
| --- | --- |
| 企画者 / クリエイティブリード | 世界観とコンテンツ方針を決定 |
| コンテンツ編集者 | Sanity Studio からキャラクター情報を登録・更新 |
| Web開発者 | フロントエンド実装・運用 |
| 一般訪問者 | コンテンツ閲覧、SNS共有、将来的な参加登録 |

## 3. スコープ
### 3.1 インスコープ
- Next.js を用いた SPA + サーバーコンポーネント実装
- Sanity CMS とのデータ連携／管理画面提供
- キャラクター情報の表示（一覧・詳細・ストーリー）
- ピックアップキャラクターのカルーセル表示
- デザインテーマ（ダーク×ネオン）の実装

### 3.2 アウトオブスコープ
- 会員登録・ログイン機能
- 決済や課金要素
- 多言語対応（現状は日本語）
- 高度な検索／フィルター（入力UIのみ）
- バックエンド API 実装（Sanity 以外）

## 4. ユースケース / シナリオ
1. **訪問者がトップページを閲覧**し、世界観や魅力を知る
2. **Portal からキャラクター一覧を探索**し、興味のあるキャラクターを選択
3. **キャラクター詳細ページでステータスやストーリーを閲覧**し、特設ページへの導線を利用
4. **特設ストーリーページで追加コンテンツ**（ポートフォリオリンクやギャラリー）を参照
5. **Sanity Studio で編集者がキャラクターを追加／更新**し、即座にサイトへ反映

## 5. 機能要件
### 5.1 ランディングページ
- [FR-01] ヒーローセクションで世界観コピーと Portal への導線を表示
- [FR-02] About/Story セクションでプロジェクト概要・キーワードを紹介
- [FR-03] Featured Characters セクションで `isPickup` true のキャラを最大件数制限なく表示
- [FR-04] Connect セクションで連絡先（仮）を提示

### 5.2 Portal ページ
- [FR-10] 最新のキャラクター 5 件をカルーセル表示（順次巡回可能）
- [FR-11] 全キャラクターをグリッドで表示し、名前／クラス／アーキタイプを明示
- [FR-12] 検索入力欄を設置（現状はUIのみ）

### 5.3 キャラクター詳細
- [FR-20] 画像・名前・クラス・アーキタイプ情報を表示
- [FR-21] ステータス6項目をゲージで表示
- [FR-22] スキル・性格・背景・進化経路をPortable Textで表示
- [FR-23] 前後キャラクターへのナビゲーションリンクを提供
- [FR-24] 特設ストーリーページへの導線を表示

### 5.4 特設ストーリーページ
- [FR-30] Hero背景（ヒーロー画像＋キャッチコピー）を表示
- [FR-31] 過去／未来ストーリーを Portable Text で表示
- [FR-32] ポートフォリオリンクを外部URLとして表示
- [FR-33] ギャラリー画像をキャプション付きで表示
- [FR-34] Portal ページへ戻る導線を提供

### 5.5 CMS / 管理
- [FR-40] Sanity Studio で `character` ドキュメントを CRUD 管理
- [FR-41] `specialPage` 内の複合フィールド（リンク・ギャラリー等）を編集可能
- [FR-42] サイト側は Sanity 変更を即時反映（CDN 無効化設定）

## 6. 非機能要件
- [NFR-01] レイテンシ: 国内ユーザーが 3 秒以内に初回描画
- [NFR-02] レスポンシブ: スマートフォン ～ デスクトップで閲覧可能
- [NFR-03] 可用性: Sanity 稼働時はサイトがコンテンツを表示できること
- [NFR-04] 運用性: CMS だけでキャラクターを追加・更新できること
- [NFR-05] コンテンツ一貫性: Portable Text レイアウトが大きく崩れないこと
- [NFR-06] アクセシビリティ: 文字コントラストを確保、代替テキストを設定
- [NFR-07] SEO: タイトル・description の設定、クローラブロックなし

## 7. コンテンツ要件
- `character.name`: 必須、ユニーク
- `character.characterId`: スラッグ、自動生成可
- `stats` 各値: 0-100 の整数入力を想定
- `specialPage.catchphrase/heroSubtitle`: 複数行テキスト
- `creativeLinks`: title + url + platform（YouTube/Twitter/Pixiv/Other）
- 画像フィールド: Sanity の Asset Store を利用しホットスポット指定可能

## 8. 制約・前提
- Sanity プロジェクトとデータセットが既に作成済みであること
- `.env.local` に環境変数が設定されていること
- 画像ホスティングは Sanity CDN を利用（外部URL許可）
- styled-components / framer-motion は将来的なデザイン拡張用途として保持

## 9. マイルストーンの目安
1. 環境構築（Next + Sanity 接続）
2. ランディング/Portal ページ実装
3. キャラクター詳細/ストーリー実装
4. CMS スキーマ調整と Studio 埋め込み
5. テスト＆アクセシビリティ/SEO チェック

## 10. リスクと対応策
| リスク | 影響 | 対応策 |
| --- | --- | --- |
| Sanity のスキーマ変更 | コンテンツ構造崩れ | スキーマ変更はバージョン管理し、マイグレーションを検討 |
| 画像最適化未実装 | 表示速度低下 | Next Image or Sanity 画像変換の導入を検討 |
| 検索機能未実装 | ユーザー体験低下 | 優先度を明確化し、後続スプリントで実装 |
| styled-components など未使用依存 | バンドル肥大 | 使用予定が無ければ依存削減 |

## 11. 成功指標（KPI例）
- 月間訪問者数、滞在時間
- キャラクター詳細ページ遷移率
- CMS 更新からサイト反映までの時間
- SNS シェア数

## 12. 今後の検討
- 多言語化（EN/JP 切替）
- 検索・タグ・アーカイブ機能の強化
- X / Facebook 共有メタタグ拡充
- 参加申し込みフォームの実装
