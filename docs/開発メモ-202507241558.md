## 開発メモ：Webサイト「鏡の中の冒険者たち」

- **日付**: 2025年7月24日
    
- **ステータス**: **完全な骨格の構築完了**
    
- **次のステップ**: Sanity CMSの統合
    

### 1. プロジェクトの現状

現在、本プロジェクトは**「完全な骨格」**が完成した状態です。これは、最終仕様書で定義された全てのページと情報セクションのレイアウトが、静的ファイルとしてフロントエンドに実装済みであることを意味します。

- **実装済みページ**:
    
    - `/` (トップページ)
        
    - `/tavern` (冒険者の酒場)
        
    - `/characters/[characterId]` (キャラクター詳細)
        
    - `/characters/[characterId]/story` (キャラクター特設)
        
- **実装済みコンポーネント**:
    
    - `Card`, `Orb`, `StatusBar`, `SectionTitle`, `InfoPanel`など、サイトを構成する主要なUI部品は全て実装済みです。
        
- **デザインシステム**:
    
    - 最終仕様書に基づいたカラーパレット、フォント、基本的なスタイルが`tailwind.config.ts`と`globals.css`に適用済みです。
        
- **データ**:
    
    - 全てのページに表示されるテキストや画像は、現在**ハードコードされたダミーデータ**です。次のフェーズで、これをSanity CMSからの動的データに置き換えます。
        

### 2. これまでの開発プロセスと教訓

本プロジェクトは、初期段階で技術的な問題に直面しましたが、以下のプロセスを経て解決し、現在の安定した状態に至りました。

#### Step 1: 技術的障害の特定と解決

- **問題**: プロジェクト開始時、最新版のNext.js（プレリリース版）を使用した結果、Tailwind CSSのスタイルが適用されない問題が発生。
    
- **原因**: ターミナルエラー `[Error: Cannot apply unknown utility class]` から、Next.jsのプレリリース版とTailwind CSS間の互換性の問題であると特定。
    
- **解決策**: **Next.jsの安定版（v14）を指定してプロジェクトを再構築**することで、問題を完全に解決。
    
- **教訓**: 新規プロジェクトでは、実績のある安定バージョンを明示的に指定することが、手戻りを防ぐ上で極めて重要である。
    

#### Step 2: 確実な成功のためのワークフロー確立

技術的な問題解決後、以下の**「骨格構築ワークフロー」**を確立し、開発をスムーズに進めました。

1. **基盤の構築**: まず、Next.jsの安定版でプロジェクトを作成し、背景色などの最小限のスタイルが適用されることを確認。
    
2. **全ページの骨格作成**: サイトマップに基づき、全てのページのファイルとフォルダ構造を先に作成。
    
3. **デザインシステムの適用**: `tailwind.config.ts`と`globals.css`に、最終仕様のデザインを適用。
    
4. **コンポーネントの個別実装**: `Card`や`Orb`などの再利用可能なコンポーネントを一つずつ作成・検証。
    
5. **ページへの配置**: 完成したコンポーネントを各ページに配置し、最終的なレイアウトを完成。
    

この手順により、機能とデザインの問題を分離し、手戻りのない効率的な開発を実現しました。

### 3. 次のステップと引き継ぎ事項

- **Sanity CMSのセットアップ**: Sanity.ioでプロジェクトを作成し、仕様書に基づき`Character`スキーマを定義してください。
    
- **Next.jsとの連携**: Next.jsアプリケーションに`next-sanity`を導入し、Sanityからのデータ取得設定を行ってください。
    
- **ページの動的化**: 各ページのハードコードされたダミーデータを、Sanityからの動的データに置き換えてください。
    

現在のコードベースは、これらの次のステップに進むための、クリーンで安定した土台となっています。